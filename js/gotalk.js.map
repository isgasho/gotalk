{
  "version": 3,
  "sources": ["gotalk/utf8.js", "gotalk/buf.js", "gotalk/protocol.js", "gotalk/EventEmitter.js", "gotalk/env.js", "gotalk/netaccess.js", "gotalk/keepalive.js", "gotalk/index.js"],
  "sourcesContent": ["\"use strict\";\n//\n// decode(Buf) -> String\n// encode(String) -> Buf\n// sizeOf(String) -> int\n//\n\n// Returns the number of bytes needed to represent string `s` as UTF8\nfunction sizeOf(s) {\n  var z = 0, i = 0, c;\n  for (; c = s.charCodeAt(i++); z += (c >> 11 ? 3 : c >> 7 ? 2 : 1) );\n  return z;\n}\nexports.sizeOf = sizeOf;\n\nfunction mask8(c) {\n  return 0xff & c;\n}\n\nif (typeof TextDecoder !== 'undefined') {\n  // ============================================================================================\n  // Native TextDecoder/TextEncoder implementation\n  var decoder = new TextDecoder('utf8');\n  var encoder = new TextEncoder('utf8');\n\n  exports.decode = function decode(b) {\n    return decoder.decode(b);\n  };\n\n  exports.encode = function encode(s) {\n    return encoder.encode(s);\n  };\n\n} else {\n  // ============================================================================================\n  // JS implementation\n\n  exports.decode = function decode(b) {\n    var i = 0, e = b.length - i, c, lead, s = '';\n    for (i = 0; i < e; ) {\n      c = b[i++];\n      lead = mask8(c);\n      if (lead < 0x80) {\n        // single byte\n      } else if ((lead >> 5) == 0x6) {\n        c = ((c << 6) & 0x7ff) + (b[i++] & 0x3f);\n      } else if ((lead >> 4) == 0xe) {\n        c = ((c << 12) & 0xffff) + ((mask8(b[i++]) << 6) & 0xfff);\n        c += b[i++] & 0x3f;\n      } else if ((lead >> 3) == 0x1e) {\n        c = ((c << 18) & 0x1fffff) + ((mask8(b[i++]) << 12) & 0x3ffff);\n        c += (mask8(b[i++]) << 6) & 0xfff;\n        c += b[i++] & 0x3f;\n      }\n      s += String.fromCharCode(c);\n    }\n\n    return s;\n  };\n\n  exports.encode = function encode(s) {\n    var i = 0, e = s.length, c, j = 0, b = new Uint8Array(sizeOf(s));\n    for (; i !== e;) {\n      c = s.charCodeAt(i++);\n      // TODO FIXME: charCodeAt returns UTF16-like codepoints, not UTF32 codepoints, meaning that\n      // this code only works for BMP. However, current ES only supports BMP. Ultimately we should\n      // dequeue a second UTF16 codepoint when c>BMP.\n      if (c < 0x80) {\n        b[j++] = c;\n      } else if (c < 0x800) {\n        b[j++] = (c >> 6)   | 0xc0;\n        b[j++] = (c & 0x3f) | 0x80;\n      } else if (c < 0x10000) {\n        b[j++] = (c >> 12)          | 0xe0;\n        b[j++] = ((c >> 6) & 0x3f)  | 0x80;\n        b[j++] = (c & 0x3f)         | 0x80;\n      } else {\n        b[j++] = (c >> 18)          | 0xf0;\n        b[j++] = ((c >> 12) & 0x3f) | 0x80;\n        b[j++] = ((c >> 6) & 0x3f)  | 0x80;\n        b[j++] = (c & 0x3f)         | 0x80;\n      }\n    }\n    return b;\n  };\n\n}\n\n// var s = '\u2206\u00E5\u00DFf'; // '\u65E5\u672C\u8A9E'\n// var b = exports.encode(s);\n// console.log('encode(\"'+s+'\") =>', b);\n// console.log('decode(',b,') =>', exports.decode(b));\n", "\"use strict\";\nvar Buf;\n\nif (typeof Uint8Array !== 'undefined') {\n\nvar utf8 = require('./utf8');\n\n// Buf(Buf) -> Buf\n// Buf(size int) -> Buf\n// Buf(ArrayBuffer) -> Buf\nBuf = function Buf(v) {\n  return v instanceof Uint8Array ? v :\n    new Uint8Array(\n      v instanceof ArrayBuffer ? v :\n      new ArrayBuffer(v)\n    );\n};\n\n}\n\nmodule.exports = Buf;\n", "\"use strict\";\nvar Buf = require('./buf');\nvar utf8 = require('./utf8');\n\n// Version of this protocol\nexports.Version = 1;\n\n// Message types\nvar MsgTypeSingleReq     = exports.MsgTypeSingleReq =     0x72 // 'r'.charCodeAt(0)\n  , MsgTypeStreamReq     = exports.MsgTypeStreamReq =     0x73 // 's'.charCodeAt(0)\n  , MsgTypeStreamReqPart = exports.MsgTypeStreamReqPart = 0x70 // 'p'.charCodeAt(0)\n  , MsgTypeSingleRes     = exports.MsgTypeSingleRes =     0x52 // 'R'.charCodeAt(0)\n  , MsgTypeStreamRes     = exports.MsgTypeStreamRes =     0x53 // 'S'.charCodeAt(0)\n  , MsgTypeErrorRes      = exports.MsgTypeErrorRes =      0x45 // 'E'.charCodeAt(0)\n  , MsgTypeRetryRes      = exports.MsgTypeRetryRes =      0x65 // 'e'.charCodeAt(0)\n  , MsgTypeNotification  = exports.MsgTypeNotification =  0x6E // 'n'.charCodeAt(0)\n  , MsgTypeHeartbeat     = exports.MsgTypeHeartbeat =     0x68 // 'h'.charCodeAt(0)\n  , MsgTypeProtocolError = exports.MsgTypeProtocolError = 0x66 // 'f'.charCodeAt(0)\n;\n\n// ProtocolError codes\nexports.ErrorAbnormal    = 0\nexports.ErrorUnsupported = 1;\nexports.ErrorInvalidMsg  = 2;\nexports.ErrorTimeout     = 3;\n\n// Maximum value of a heartbeat's \"load\"\nexports.HeartbeatMsgMaxLoad = 0xffff;\n\n// ==============================================================================================\n// Binary (byte) protocol\n\nfunction copyBufFixnum(b, start, n, digits) {\n  var i = start || 0, y = 0, c, s = n.toString(16), z = digits - s.length;\n  for (; z--;) { b[i++] = 48; }\n  for (; !isNaN(c = s.charCodeAt(y++));) { b[i++] = c; }\n}\n\nfunction makeBufFixnum(n, digits) {\n  var b = Buf(digits);\n  copyBufFixnum(b, 0, n, digits);\n  return b;\n}\n\n\n// parseHexInt(['0','0','A','3']) => 0xA3\nfunction parseHexInt(bytes) {\n  var val = 0, i = 0, c = 0, err = false\n  for (; i < bytes.length; i++) {\n    c = bytes[i]\n    if (c < 0x40) { // 0-9\n      if (c < 0x30) {\n        err = true\n      }\n      c -= 0x30\n    } else if (c < 0x47) { // A-F\n      if (c < 0x41) {\n        err = true\n      }\n      c -= 0x37\n    } else if (c < 0x67 && 0x60 < c) { // a-f\n      c -= 0x57\n    } else {\n      err = true\n    }\n    val = (val << 4) | (c & 0xF)\n  }\n  if (err) {\n    throw new Error(\"invalid hexint \" + String.fromCharCode.apply(null, bytes))\n  }\n  return val\n}\n\n// test parseHexInt\n/*function testh(input, expected) {\n  var actual = parseHexInt(input.split(\"\").map(function(c) { return c.charCodeAt(0) }))\n  if (actual.toString(16) != expected) {\n    throw new Error(\"test(\" + input + \") expected \" + expected + \" but got \" + actual)\n  }\n}\ntesth(\"00A3\", \"a3\")\ntesth(\"0000001f\", \"1f\")\n\nfunction parseHexIntSlow(b) {\n  return parseInt(String.fromCharCode.apply(null, b), 16)\n}\n*/\n\n\n\nexports.binary = {\n\n  makeFixnum: makeBufFixnum,\n\n  versionBuf: makeBufFixnum(exports.Version, 2),\n\n  parseVersion: parseHexInt,\n\n  // Parses a byte buffer containing a message (not including payload data.)\n  // If t is MsgTypeHeartbeat, wait==load, size==time.\n  // -> {t:string, id:Buf, name:string, wait:int size:int} | null\n  parseMsg: function (b) {\n    var t, id, name, namez, wait = 0, size = 0, z;\n    // Example:\n    // R000A00000006\n    // R             = type response\n    //  0000         = id   10\n    //      00000006 = size 6\n\n    t = b[0];\n    z = 1;\n\n    if (t === MsgTypeHeartbeat) {\n      wait = parseHexInt(b.subarray(z, z + 4));\n      z += 4;\n    } else if (t !== MsgTypeNotification && t !== MsgTypeProtocolError) {\n      id = b.subarray(z, z + 4);\n      z += 4;\n    }\n\n    if (t == MsgTypeSingleReq || t == MsgTypeStreamReq || t == MsgTypeNotification) {\n      namez = parseHexInt(b.subarray(z, z + 3));\n      z += 3;\n      name = utf8.decode(b.subarray(z, z + namez));\n      z += namez;\n    } else if (t === MsgTypeRetryRes) {\n      wait = parseHexInt(b.subarray(z, z + 8));\n      z += 8\n    }\n\n    size = parseHexInt(b.subarray(z, z + 8));\n\n    return {t:t, id:id, name:name, wait:wait, size:size};\n  },\n\n  // Create a buf representing a message (w/o any payload)\n  makeMsg: function (t, id, name, wait, size) {\n    var b, nameb, z = id ? 13 : 9;\n\n    // if there's a name, encode as utf8 and increase buffer size\n    if (name && name.length !== 0) {\n      nameb = utf8.encode(name);\n      z += 3 + nameb.length;\n    }\n\n    b = Buf(z);\n\n    b[0] = t;\n    z = 1;\n\n    if (id && id.length === 4) {\n      if (typeof id === 'string') {\n        b[1] = id.charCodeAt(0);\n        b[2] = id.charCodeAt(1);\n        b[3] = id.charCodeAt(2);\n        b[4] = id.charCodeAt(3);\n      } else {\n        b[1] = id[0];\n        b[2] = id[1];\n        b[3] = id[2];\n        b[4] = id[3];\n      }\n      z += 4;\n    }\n\n    if (nameb) {\n      copyBufFixnum(b, z, nameb.length, 3);\n      z += 3;\n      b.set(nameb, z);\n      z += nameb.length;\n    }\n\n    if (t === MsgTypeRetryRes) {\n      copyBufFixnum(b, z, wait, 8);\n      z += 8\n    }\n\n    copyBufFixnum(b, z, size, 8);\n\n    return b;\n  },\n\n  // Create a buf representing a heartbeat message\n  makeHeartbeatMsg: function(load) {\n    var b = Buf(13), z = 1;\n    b[0] = MsgTypeHeartbeat;\n    copyBufFixnum(b, z, load, 4);\n    z += 4;\n    copyBufFixnum(b, z, Math.round((new Date).getTime()/1000), 8);\n    z += 8;\n    return b;\n  }\n};\n\n\n// ==============================================================================================\n// Text protocol\n\nvar zeroes = '00000000';\n\nfunction makeStrFixnum(n, digits) {\n  var s = n.toString(16);\n  return zeroes.substr(0, digits - s.length) + s;\n}\n\nexports.text = {\n\n  makeFixnum: makeStrFixnum,\n\n  versionBuf: makeStrFixnum(exports.Version, 2),\n\n  parseVersion: function (buf) {\n    return parseInt(buf.substr(0,2), 16);\n  },\n\n  // Parses a text string containing a message (not including payload data.)\n  // If t is MsgTypeHeartbeat, wait==load, size==time.\n  // -> {t:string, id:Buf, name:string, wait:int size:int} | null\n  parseMsg: function (s) {\n    // \"r001004echo00000005\" => ('r', \"001\", \"echo\", 5)\n    // \"R00100000005\"        => ('R', \"001\", \"\", 5)\n    var t, id, name, wait = 0, size = 0, z;\n\n    t = s.charCodeAt(0);\n    z = 1;\n\n    if (t === MsgTypeHeartbeat) {\n      wait = parseInt(s.substr(z, 4), 16);\n      z += 4;\n    } else if (t !== MsgTypeNotification && t !== MsgTypeProtocolError) {\n      id = s.substr(z, 4);\n      z += 4;\n    }\n\n    if (t == MsgTypeSingleReq || t == MsgTypeStreamReq || t == MsgTypeNotification) {\n      name = s.substring(z + 3, s.length - 8);\n    } else if (t == MsgTypeRetryRes) {\n      wait = parseInt(s.substr(z, 8), 16);\n      z += 8\n    }\n\n    size = parseInt(s.substr(s.length - 8), 16);\n\n    return {t:t, id:id, name:name, wait:wait, size:size};\n  },\n\n\n  // Create a text string representing a message (w/o any payload.)\n  makeMsg: function (t, id, name, wait, size) {\n    var b = String.fromCharCode(t);\n\n    if (id && id.length === 4) {\n      b += id;\n    }\n\n    if (name && name.length !== 0) {\n      b += makeStrFixnum(utf8.sizeOf(name), 3);\n      b += name;\n    }\n\n    if (t === MsgTypeRetryRes) {\n      b += makeStrFixnum(wait, 8);\n    }\n\n    b += makeStrFixnum(size, 8);\n\n    return b;\n  },\n\n  // Create a text string representing a heartbeat message\n  makeHeartbeatMsg: function(load) {\n    var s = String.fromCharCode(MsgTypeHeartbeat);\n    s += makeStrFixnum(load, 4);\n    s += makeStrFixnum(Math.round((new Date).getTime()/1000), 8);\n    return s;\n  }\n\n}; // exports.text\n\n", "\nfunction EventEmitter() {}\nmodule.exports = EventEmitter;\n\nEventEmitter.prototype.addListener = function (type, listener) {\n  if (typeof listener !== 'function') throw TypeError('listener must be a function');\n  if (!this.__events) {\n    Object.defineProperty(this, '__events', {value:{}, enumerable:false, writable:true});\n    this.__events[type] = [listener];\n    return this;\n  }\n  var listeners = this.__events[type];\n  if (listeners === undefined) {\n    this.__events[type] = [listener];\n    return this;\n  }\n  listeners.push(listener);\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function (type, listener) {\n  var fired = false;\n  var trigger_event_once = function() {\n    this.removeListener(type, trigger_event_once);\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n  return this.on(type, trigger_event_once);\n};\n\nEventEmitter.prototype.removeListener = function (type, listener) {\n  var p, listeners = this.__events ? this.__events[type] : undefined;\n  if (listeners !== undefined) {\n    while ((p = listeners.indexOf(listener)) !== -1) {\n      listeners.splice(p,1);\n    }\n    if (listeners.length === 0) {\n      delete this.__events[type];\n    }\n    return listeners.length;\n  }\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function (type) {\n  if (this.__events) {\n    if (type) {\n      delete this.__events[type];\n    } else {\n      delete this.__events;\n    }\n  }\n};\n\nEventEmitter.prototype.listeners = function (type) {\n  return type ? (this.__events ? this.__events[type] : undefined) : this.__events;\n};\n\nEventEmitter.prototype.emit = function (type) {\n  var listeners = this.__events ? this.__events[type] : undefined;\n  if (listeners === undefined) {\n    return false;\n  }\n  var i = 0, L = listeners.length, args = Array.prototype.slice.call(arguments,1);\n  for (; i !== L; ++i) {\n    if (!listeners[i]) {\n      console.log('e', type, i, args);\n    }\n    listeners[i].apply(this, args);\n  }\n  return true;\n};\n\nEventEmitter.mixin = function mixin(obj) {\n  var proto = obj;\n  while (proto) {\n    if (proto.__proto__ === Object.prototype) {\n      proto.__proto__ = EventEmitter.prototype;\n      return obj;\n    }\n    proto = proto.__proto__;\n  }\n  return obj;\n};\n\n", "exports.global = (\n  typeof global != 'undefined' ? global :\n  typeof self != 'undefined' ? self :\n  typeof window != 'undefined' ? window :\n  this\n)\n", "\"use strict\";\nvar EventEmitter = require('./EventEmitter');\nvar global = require('./env')\nvar m;\n\nif (global.addEventListener) {\n  m = Object.create(EventEmitter.prototype, {\n    available: {value:true, enumerable:true},\n    onLine:    {value:true, enumerable:true, writable:true}\n  });\n\n  if (typeof navigator !== 'undefined') {\n    m.onLine = navigator.onLine;\n  }\n\n  global.addEventListener(\"offline\", function (ev) {\n    m.onLine = false;\n    m.emit('offline');\n  });\n\n  global.addEventListener(\"online\", function (ev) {\n    m.onLine = true;\n    m.emit('online');\n  });\n\n} else {\n  m = {available:false, onLine:true};\n}\n\nmodule.exports = m;\n", "\"use strict\";\n// Stay connected by automatically reconnecting w/ exponential back-off.\n\nvar netAccess = require('./netaccess');\nvar protocol = require('./protocol');\n\n// `s` must conform to interface { connect(addr string, cb function(Error)) }\n// Returns an object {\n//   isConnected bool  // true if currently connected\n//   isEnabled bool    // true if enabled\n//   enable()          // enables staying connected\n//   disable()         // disables trying to stay connected\n// }\nvar keepalive = function(s, addr, minReconnectDelay, maxReconnectDelay) {\n  if (!minReconnectDelay) {\n    minReconnectDelay = 500;\n  } else if (minReconnectDelay < 100) {\n    minReconnectDelay = 100;\n  }\n\n  if (!maxReconnectDelay || maxReconnectDelay < minReconnectDelay) {\n    maxReconnectDelay = 5000;\n  }\n\n  var ctx, open, retry, delay = 0, openTimer, opentime;\n\n  ctx = {\n    isEnabled: false,\n    isConnected: false,\n    enable: function() {\n      if (!ctx.enabled) {\n        ctx.enabled = true;\n        delay = 0;\n        if (!ctx.isConnected) {\n          open();\n        }\n      }\n    },\n    disable: function() {\n      if (ctx.enabled) {\n        clearTimeout(openTimer);\n        ctx.enabled = false;\n        delay = 0;\n      }\n    }\n  };\n\n  open = function() {\n    clearTimeout(openTimer);\n    s.open(addr, function(err) {\n      opentime = new Date;\n      if (err) {\n        retry(err);\n      } else {\n        delay = 0;\n        ctx.isConnected = true;\n        s.once('close', retry);\n      }\n    });\n  };\n\n  retry = function(err) {\n    clearTimeout(openTimer);\n    ctx.isConnected = false;\n    if (!ctx.enabled) {\n      return;\n    }\n    if (netAccess.available && !netAccess.onLine && \n        !(typeof document !== 'undefined' &&\n          document.location &&\n          document.location.hostname !== 'localhost' &&\n          document.location.hostname !== '127.0.0.1' &&\n          document.location.hostname !== '[::1]') )\n    {\n      netAccess.once('online', retry);\n      delay = 0;\n      return;\n    }\n    if (err) {\n      if (err.isGotalkProtocolError) {\n        if (err.code === protocol.ErrorTimeout) {\n          delay = 0;\n        } else {\n          // We shouldn't retry with the same version of our gotalk library.\n          // However, the only sensible thing to do in this case is to let the user code react to\n          // the error passed to the close event (e.g. to show a \"can't talk to server\" UI), and\n          // retry in maxReconnectDelay.\n          // User code can choose to call `disable()` on its keepalive object in this case.\n          delay = maxReconnectDelay;\n        }\n      } else {\n        // increase back off in case of an error\n        delay = delay ? Math.min(maxReconnectDelay, delay * 2) : minReconnectDelay;\n      }\n    } else {\n      delay = Math.max(0, minReconnectDelay - ((new Date) - opentime));\n    }\n    openTimer = setTimeout(open, delay);\n  };\n\n  return ctx;\n};\n\nmodule.exports = keepalive;\n", "\"use strict\";\nvar protocol = require('./protocol'),\n      txt = protocol.text,\n      bin = protocol.binary;\nvar Buf = require('./buf');\nvar utf8 = require('./utf8');\nvar EventEmitter = require('./EventEmitter');\nvar keepalive = require('./keepalive');\nvar global = require('./env').global\n\nvar gotalk = exports;\nexport default exports\n\ngotalk.protocol = protocol;\ngotalk.Buf = Buf;\n\nfunction decodeJSON(v) {\n  if (typeof v != \"string\") {\n    v = utf8.decode(v)\n  }\n  try {\n    return JSON.parse(v);\n  } catch (err) {\n    if (typeof console != \"undefined\" && console.warn)\n    console.warn(\"[gotalk] ignoring invalid json\", v)\n  }\n}\n\n\n// ===============================================================================================\n\nfunction Sock(handlers, proto) { return Object.create(Sock.prototype, {\n  // Public properties\n  handlers:      {value:handlers, enumerable:true},\n  protocol:      {\n    value:      proto || (Buf ? protocol.binary : protocol.text),\n    enumerable: true,\n    writable:   true\n  },\n  heartbeatInterval: {value: 20 * 1000, enumerable:true, writable:true},\n\n  // Internal\n  ws:            {value:null, writable:true},\n  keepalive:     {value:null, writable:true},\n\n  // Used for performing requests\n  nextOpID:      {value:0, writable:true},\n  nextStreamID:  {value:0, writable:true},\n  pendingRes:    {value:{}, writable:true},\n  hasPendingRes: {get:function(){ for (var k in this.pendingRes) { return true; } }},\n\n  // True if end() has been called while there were outstanding responses\n  pendingClose:  {value:false, writable:true}\n}); }\n\nSock.prototype = EventEmitter.mixin(Sock.prototype);\nexports.Sock = Sock;\n\n\nfunction resetSock(s, causedByErr) {\n  s.pendingClose = false;\n  s.stopSendingHeartbeats();\n\n  if (s.ws) {\n    s.ws.onmessage = null;\n    s.ws.onerror = null;\n    s.ws.onclose = null;\n    s.ws = null;\n  }\n\n  s.nextOpID = 0;\n  if (s.hasPendingRes) {\n    var err = causedByErr || new Error('connection closed');\n    // TODO: return a RetryResult kind of error instead of just an error\n    for (var k in s.pendingRes) {\n      s.pendingRes[k](err);\n    }\n    s.pendingRes = {};\n  }\n}\n\n\nvar websocketCloseStatus = {\n  1000: 'normal',\n  1001: 'going away',\n  1002: 'protocol error',\n  1003: 'unsupported',\n  // 1004 is currently unassigned\n  1005: 'no status',\n  1006: 'abnormal',\n  1007: 'inconsistent',\n  1008: 'invalid message',\n  1009: 'too large',\n};\n\n\n// Adopt a web socket, which should be in an OPEN state\nSock.prototype.adoptWebSocket = function(ws) {\n  var s = this;\n  if (ws.readyState !== WebSocket.OPEN) {\n    throw new Error('web socket readyState != OPEN');\n  }\n  ws.binaryType = 'arraybuffer';\n  s.ws = ws;\n  ws.onclose = function(ev) {\n    var err = ws._gotalkCloseError;\n    if (!err && ev.code !== 1000) {\n      err = new Error('websocket closed: ' + (websocketCloseStatus[ev.code] || '#'+ev.code));\n    }\n    resetSock(s, err);\n    s.emit('close', err);\n  };\n  ws.onmessage = function(ev) {\n    if (!ws._bufferedMessages) ws._bufferedMessages = [];\n    ws._bufferedMessages.push(ev.data);\n  };\n};\n\n\nSock.prototype.adopt = function(rwc) {\n  if (adopt instanceof WebSocket) {\n    return this.adoptWebSocket(rwc);\n  } else {\n    throw new Error('unsupported transport');\n  }\n};\n\n\nSock.prototype.handshake = function () {\n  this.ws.send(this.protocol.versionBuf);\n};\n\n\nSock.prototype.end = function() {\n  // Allow calling twice to \"force close\" even when there are pending responses\n  var s = this;\n  if (s.keepalive) {\n    s.keepalive.disable();\n    s.keepalive = null;\n  }\n  if (!s.pendingClose && s.hasPendingRes) {\n    s.pendingClose = true;\n  } else if (s.ws) {\n    s.ws.close(1000);\n  }\n};\n\n\nSock.prototype.address = function() {\n  var s = this;\n  if (s.ws) {\n    return s.ws.url;\n  }\n  return null;\n};\n\n// ===============================================================================================\n// Reading messages from a connection\n\nvar ErrAbnormal = exports.ErrAbnormal = Error(\"unsupported protocol\");\nErrAbnormal.isGotalkProtocolError = true;\nErrAbnormal.code = protocol.ErrorAbnormal;\n\nvar ErrUnsupported = exports.ErrUnsupported = Error(\"unsupported protocol\");\nErrUnsupported.isGotalkProtocolError = true;\nErrUnsupported.code = protocol.ErrorUnsupported;\n\nvar ErrInvalidMsg = exports.ErrInvalidMsg = Error(\"invalid protocol message\");\nErrInvalidMsg.isGotalkProtocolError = true;\nErrInvalidMsg.code = protocol.ErrorInvalidMsg;\n\nvar ErrTimeout = exports.ErrTimeout = Error(\"timeout\");\nErrTimeout.isGotalkProtocolError = true;\nErrTimeout.code = protocol.ErrorTimeout;\n\n\nSock.prototype.sendHeartbeat = function (load) {\n  var s = this, buf = s.protocol.makeHeartbeatMsg(Math.round(load * protocol.HeartbeatMsgMaxLoad));\n  try {\n    s.ws.send(buf);\n  } catch (err) {\n    if (!this.ws || this.ws.readyState > WebSocket.OPEN) {\n      err = new Error('socket is closed');\n    }\n    throw err;\n  }\n};\n\n\nSock.prototype.startSendingHeartbeats = function() {\n  var s = this;\n  if (s.heartbeatInterval < 10) {\n    throw new Error(\"Sock.heartbeatInterval is too low\");\n  }\n  clearTimeout(s._sendHeartbeatsTimer);\n  var send = function() {\n    clearTimeout(s._sendHeartbeatsTimer);\n    s.sendHeartbeat(0);\n    s._sendHeartbeatsTimer = setTimeout(send, s.heartbeatInterval);\n  };\n  s._sendHeartbeatsTimer = setTimeout(send, 1);\n};\n\n\nSock.prototype.stopSendingHeartbeats = function() {\n  var s = this;\n  clearTimeout(s._sendHeartbeatsTimer);\n};\n\n\nSock.prototype.startReading = function () {\n  var s = this, ws = s.ws, msg;  // msg = current message\n\n  function readMsg(ev) {\n    msg = typeof ev.data === 'string' ? txt.parseMsg(ev.data) : bin.parseMsg(Buf(ev.data));\n    // console.log(\n    //   'readMsg:',\n    //   typeof ev.data === 'string' ? ev.data : Buf(ev.data).toString(),\n    //   'msg:',\n    //   msg\n    // );\n    if (msg.t === protocol.MsgTypeProtocolError) {\n      var errcode = msg.size;\n      if (errcode === protocol.ErrorAbnormal) {\n        ws._gotalkCloseError = ErrAbnormal;\n      } else if (errcode === protocol.ErrorUnsupported) {\n        ws._gotalkCloseError = ErrUnsupported;\n      } else if (errcode === protocol.ErrorTimeout) {\n        ws._gotalkCloseError = ErrTimeout;\n      } else {\n        ws._gotalkCloseError = ErrInvalidMsg;\n      }\n      ws.close(4000 + errcode);\n    } else if (msg.size !== 0 && msg.t !== protocol.MsgTypeHeartbeat) {\n      ws.onmessage = readMsgPayload;\n    } else {\n      s.handleMsg(msg);\n      msg = null;\n    }\n  }\n\n  function readMsgPayload(ev) {\n    var b = ev.data;\n    ws.onmessage = readMsg;\n    s.handleMsg(msg, typeof b === 'string' ? b : Buf(b));\n    msg = null;\n  }\n\n  function readVersion(ev) {\n    var peerVersion = typeof ev.data === 'string' ? txt.parseVersion(ev.data) :\n                                                    bin.parseVersion(Buf(ev.data));\n    if (peerVersion !== protocol.Version) {\n      ws._gotalkCloseError = ErrUnsupported;\n      s.closeError(protocol.ErrorUnsupported);\n    } else {\n      ws.onmessage = readMsg;\n      if (s.heartbeatInterval > 0) {\n        s.startSendingHeartbeats();\n      }\n    }\n  }\n\n  // We begin by sending our version and reading the remote side's version\n  ws.onmessage = readVersion;\n\n  // Any buffered messages?\n  if (ws._bufferedMessages) {\n    ws._bufferedMessages.forEach(function(data){ ws.onmessage({data:data}); });\n    ws._bufferedMessages = null;\n  }\n};\n\n// ===============================================================================================\n// Handling of incoming messages\n\nvar msgHandlers = {};\n\nSock.prototype.handleMsg = function(msg, payload) {\n  // console.log('handleMsg:', String.fromCharCode(msg.t), msg, 'payload:', payload);\n  var s = this;\n  var msgHandler = msgHandlers[msg.t];\n  if (!msgHandler) {\n    if (s.ws) {\n      s.ws._gotalkCloseError = ErrInvalidMsg;\n    }\n    s.closeError(protocol.ErrorInvalidMsg);\n  } else {\n    msgHandler.call(s, msg, payload);\n  }\n};\n\nmsgHandlers[protocol.MsgTypeSingleReq] = function (msg, payload) {\n  var s = this, handler, result;\n  handler = s.handlers.findRequestHandler(msg.name);\n\n  result = function (outbuf) {\n    s.sendMsg(protocol.MsgTypeSingleRes, msg.id, null, 0, outbuf);\n  };\n  result.error = function (err) {\n    var errstr = err.message || String(err);\n    s.sendMsg(protocol.MsgTypeErrorRes, msg.id, null, 0, errstr);\n  };\n\n  if (typeof handler !== 'function') {\n    result.error('no such operation \"'+msg.name+'\"');\n  } else {\n    try {\n      handler(payload, result, msg.name);\n    } catch (err) {\n      if (typeof console !== 'undefined') { console.error(err.stack || err); }\n      result.error('internal error');\n    }\n  }\n};\n\nfunction handleRes(msg, payload) {\n  var id = msg.id;\n  if (typeof id != \"string\") {\n    // then it's a Buf\n    id = String.fromCharCode.apply(null, id)\n  }\n  var s = this, callback = s.pendingRes[id];\n  if (msg.t !== protocol.MsgTypeStreamRes || !payload || (payload.length || payload.size) === 0) {\n    delete s.pendingRes[id];\n    if (s.pendingClose && !s.hasPendingRes) {\n      s.end();\n    }\n  }\n  if (typeof callback !== 'function') {\n    return; // ignore message\n  }\n  if (msg.t === protocol.MsgTypeErrorRes) {\n    if (typeof payload != \"string\") {\n      payload = utf8.decode(payload)\n    }\n    callback(new Error(payload), null);\n  } else {\n    callback(null, payload);\n  }\n}\n\nmsgHandlers[protocol.MsgTypeSingleRes] = handleRes;\nmsgHandlers[protocol.MsgTypeStreamRes] = handleRes;\nmsgHandlers[protocol.MsgTypeErrorRes] = handleRes;\n\nmsgHandlers[protocol.MsgTypeNotification] = function (msg, payload) {\n  var handler = this.handlers.findNotificationHandler(msg.name);\n  if (handler) {\n    handler(payload, msg.name);\n  }\n};\n\nmsgHandlers[protocol.MsgTypeHeartbeat] = function (msg) {\n  this.emit('heartbeat', {time:new Date(msg.size * 1000), load:msg.wait});\n};\n\n// ===============================================================================================\n// Sending messages\n\n\nSock.prototype.sendMsg = function(t, id, name, wait, payload) {\n  var payloadSize = (payload && typeof payload === 'string' && this.protocol === protocol.binary) ?\n    utf8.sizeOf(payload) :\n    payload ? payload.length || payload.size :\n    0;\n  var s = this, buf = s.protocol.makeMsg(t, id, name, wait, payloadSize);\n  // console.log('sendMsg(',t,id,name,payload,'): protocol.makeMsg =>',\n  //   typeof buf === 'string' ? buf : buf.toString());\n  try {\n    s.ws.send(buf);\n    if (payloadSize !== 0) {\n      s.ws.send(payload);\n    }\n  } catch (err) {\n    if (!this.ws || this.ws.readyState > WebSocket.OPEN) {\n      err = new Error('socket is closed');\n    }\n    throw err;\n  }\n};\n\n\nSock.prototype.closeError = function(code) {\n  var s = this, buf;\n  if (s.ws) {\n    try {\n      s.ws.send(s.protocol.makeMsg(protocol.MsgTypeProtocolError, null, null, 0, code));\n    } catch (e) {}\n    s.ws.close(4000 + code);\n  }\n};\n\nvar zeroes = '0000';\n\n// callback function(Error, outbuf)\nSock.prototype.bufferRequest = function(op, buf, callback) {\n  var s = this, id = s.nextOpID++;\n  if (s.nextOpID === 1679616) {\n    // limit for base36 within 4 digits (36^4=1679616)\n    s.nextOpID = 0;\n  }\n  id = id.toString(36);\n  id = zeroes.substr(0, 4 - id.length) + id;\n\n  s.pendingRes[id] = callback;\n  try {\n    s.sendMsg(protocol.MsgTypeSingleReq, id, op, 0, buf);\n  } catch (err) {\n    delete s.pendingRes[id];\n    callback(err);\n  }\n}\n\n\nSock.prototype.bufferNotify = function(name, buf) {\n  this.sendMsg(protocol.MsgTypeNotification, null, name, 0, buf);\n}\n\n\nSock.prototype.request = function(op, value, callback) {\n  var buf;\n  if (!callback) {\n    // no value\n    callback = value;\n  } else {\n    buf = JSON.stringify(value);\n  }\n  return this.bufferRequest(op, buf, function (err, buf) {\n    var value = decodeJSON(buf);\n    return callback(err, value);\n  });\n}\n\n\nSock.prototype.notify = function(op, value) {\n  var buf = JSON.stringify(value);\n  return this.bufferNotify(op, buf);\n}\n\n\nSock.prototype.requestp = function(op, value) {\n  var s = this\n  return new Promise(function (resolve, reject) {\n    s.request(op, value, function(err, res) { err ? reject(err) : resolve(res) })\n  })\n}\n\nSock.prototype.bufferRequestp = function(op, buf) {\n  var s = this\n  return new Promise(function (resolve, reject) {\n    s.bufferRequest(op, buf, function(err, res) { err ? reject(err) : resolve(res) })\n  })\n}\n\n\n// ===============================================================================================\n\n// Represents a stream request.\n// Response(s) arrive by the \"data\"(buf) event. When the response is complete, a \"end\"(error)\n// event is emitted, where error is non-empty if the request failed.\nvar StreamRequest = function(s, op, id) {\n  return Object.create(StreamRequest.prototype, {\n    s:  {value:s},\n    op: {value:op, enumerable:true},\n    id: {value:id, enumerable:true},\n  });\n};\n\nEventEmitter.mixin(StreamRequest.prototype);\n\nStreamRequest.prototype.write = function (buf) {\n  if (!this.ended) {\n    if (!this.started) {\n      this.started = true;\n      this.s.sendMsg(protocol.MsgTypeStreamReq, this.id, this.op, 0, buf);\n    } else {\n      this.s.sendMsg(protocol.MsgTypeStreamReqPart, this.id, null, 0, buf);\n    }\n    if (!buf || buf.length === 0 || buf.size === 0) {\n      this.ended = true;\n    }\n  }\n};\n\n// Finalize the request\nStreamRequest.prototype.end = function () {\n  this.write(null);\n};\n\nSock.prototype.streamRequest = function(op) {\n  var s = this, id = s.nextStreamID++;\n  if (s.nextStreamID === 46656) {\n    // limit for base36 within 3 digits (36^3=46656)\n    s.nextStreamID = 0;\n  }\n  id = id.toString(36);\n  id = '!' + zeroes.substr(0, 3 - id.length) + id;\n\n  var req = StreamRequest(s, op, id);\n\n  s.pendingRes[id] = function (err, buf) {\n    if (err) {\n      req.emit('end', err);\n    } else if (!buf || buf.length === 0) {\n      req.emit('end', null);\n    } else {\n      req.emit('data', buf);\n    }\n  };\n\n  return req;\n};\n\n\n// ===============================================================================================\n\nfunction Handlers() { return Object.create(Handlers.prototype, {\n  reqHandlers:         {value:{}},\n  reqFallbackHandler:  {value:null, writable:true},\n  noteHandlers:        {value:{}},\n  noteFallbackHandler: {value:null, writable:true}\n}); }\nexports.Handlers = Handlers;\n\n\nHandlers.prototype.handleBufferRequest = function(op, handler) {\n  if (!op) {\n    this.reqFallbackHandler = handler;\n  } else {\n    this.reqHandlers[op] = handler;\n  }\n};\n\nHandlers.prototype.handleRequest = function(op, handler) {\n  return this.handleBufferRequest(op, function (buf, result, op) {\n    var resultWrapper = function(value) {\n      return result(JSON.stringify(value));\n    };\n    resultWrapper.error = result.error;\n    var value = decodeJSON(buf);\n    handler(value, resultWrapper, op);\n  });\n};\n\nHandlers.prototype.handleBufferNotification = function(name, handler) {\n  if (!name) {\n    this.noteFallbackHandler = handler;\n  } else {\n    this.noteHandlers[name] = handler;\n  }\n};\n\nHandlers.prototype.handleNotification = function(name, handler) {\n  this.handleBufferNotification(name, function (buf, name) {\n    handler(decodeJSON(buf), name);\n  });\n};\n\nHandlers.prototype.findRequestHandler = function(op) {\n  var handler = this.reqHandlers[op];\n  return handler || this.reqFallbackHandler;\n};\n\nHandlers.prototype.findNotificationHandler = function(name) {\n  var handler = this.noteHandlers[name];\n  return handler || this.noteFallbackHandler;\n};\n\n// TODO: Implement support for handling stream requests\n\n// ===============================================================================================\n\nfunction openWebSocket(s, addr, callback) {\n  var ws;\n  try {\n    ws = new WebSocket(addr);\n    ws.binaryType = 'arraybuffer';\n    ws.onclose = function (ev) {\n      var err = new Error('connection failed');\n      if (callback) callback(err);\n    };\n    ws.onopen = function(ev) {\n      ws.onerror = undefined;\n      s.adoptWebSocket(ws);\n      s.handshake();\n      if (callback) callback(null, s);\n      s.emit('open');\n      s.startReading();\n    };\n    ws.onmessage = function(ev) {\n      if (!ws._bufferedMessages) ws._bufferedMessages = [];\n      ws._bufferedMessages.push(ev.data);\n    };\n  } catch (err) {\n    if (callback) callback(err);\n    s.emit('close', err);\n  }\n}\n\n\n// derive defaultResponderAddress from document.currentScript.src\ngotalk.defaultResponderAddress = (function() {\n  if (typeof document == 'undefined') {\n    return\n  }\n  var s = document.currentScript.src\n  if (!s) {\n    return\n  }\n  var a = s.indexOf('://') + 3\n  if (a == 2) {\n    return\n  }\n  var proto = s.substr(0, a)\n  var b = s.indexOf('/', a)\n  if (b == -1) {\n    return\n  }\n  var host = s.substring(a, b)\n  s = s.substr(b)\n  a = s.lastIndexOf('?')\n  if (a != -1) {\n    // trim away query string\n    s = s.substr(0, a)\n  }\n  var path = s.substring(s.indexOf('/'), s.lastIndexOf('/') + 1)\n  return (proto == \"https:\" ? \"wss://\" : \"ws://\") + host + path\n})() || \"\"\n\n\nSock.prototype.open = function(addr, callback) {\n  var s = this;\n  if (!callback && typeof addr == 'function') {\n    callback = addr;\n    addr = null;\n  }\n\n  if (!addr) {\n    if (!gotalk.defaultResponderAddress) {\n      throw new Error('address not specified (empty gotalk.defaultResponderAddress)')\n    }\n    addr = gotalk.defaultResponderAddress;\n  }\n\n  openWebSocket(s, addr, callback);\n  return s;\n};\n\n\n// Open a connection to a gotalk responder.\n//\n// open(addr string[, onConnect(Error, Sock)]) -> Sock\n//   Connect to gotalk responder at `addr`\n//\n// open([onConnect(Error, Sock)]) -> Sock\n//   Connect to default gotalk responder.\n//   Throws an error if `gotalk.defaultResponderAddress` isn't defined.\n//\ngotalk.open = function(addr, onConnect, handlers, proto) {\n  return Sock(handlers || gotalk.defaultHandlers, proto).open(addr, onConnect);\n};\n\n\n// If `addr` is not provided, `gotalk.defaultResponderAddress` is used instead.\nSock.prototype.openKeepAlive = function(addr) {\n  var s = this;\n  if (s.keepalive) {\n    s.keepalive.disable();\n  }\n  s.keepalive = keepalive(s, addr);\n  s.keepalive.enable();\n  return s;\n};\n\n\n// Returns a new Sock with a persistent connection to a gotalk responder.\n// The Connection is automatically kept alive (by reconnecting) until Sock.end() is called.\n// If `addr` is not provided, `gotalk.defaultResponderAddress` is used instead.\ngotalk.connection = function(addr, handlers, proto) {\n  return Sock(handlers || gotalk.defaultHandlers, proto).openKeepAlive(addr);\n};\n\n\ngotalk.defaultHandlers = Handlers();\n\ngotalk.handleBufferRequest = function(op, handler) {\n  return gotalk.defaultHandlers.handleBufferRequest(op, handler);\n};\n\ngotalk.handle = function(op, handler) {\n  return gotalk.defaultHandlers.handleRequest(op, handler);\n};\n\ngotalk.handleBufferNotification = function (name, handler) {\n  return gotalk.defaultHandlers.handleBufferNotification(name, handler);\n};\n\ngotalk.handleNotification = function (name, handler) {\n  return gotalk.defaultHandlers.handleNotification(name, handler);\n};\n"],
  "mappings": "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",
  "names": []
}
